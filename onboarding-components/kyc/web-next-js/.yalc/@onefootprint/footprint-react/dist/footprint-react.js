import Yt, { FootprintComponentKind } from '@onefootprint/footprint-js';
import { forwardRef, createContext, useEffect, useContext, useId, useMemo, useState, useRef, useCallback, createRef } from 'react';
import { jsxs, jsx } from 'react/jsx-runtime';
import xt from 'classnames';
import _o from 'lodash/get';
import { useFormContext, useForm, FormProvider } from 'react-hook-form';
import No from 'lodash/camelCase';
import ae from 'lodash/isObject';
import Bo from 'lodash/snakeCase';
import pt from 'lodash/transform';
import Ho from 'lodash/isEqual';
import sn from 'lodash/isPlainObject';
import _n from 'cleave.js';
import Vn from 'lodash/identity';

var Mt=Object.defineProperty,Kt=Object.defineProperties;var Gt=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var qe=(e,t,o)=>t in e?Mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,d=(e,t)=>{for(var o in t||(t={}))$e.call(t,o)&&qe(e,o,t[o]);if(oe)for(var o of oe(t))Ie.call(t,o)&&qe(e,o,t[o]);return e},m=(e,t)=>Kt(e,Gt(t));var D=(e,t)=>{var o={};for(var r in e)$e.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&oe)for(var r of oe(e))t.indexOf(r)<0&&Ie.call(e,r)&&(o[r]=e[r]);return o};var b=(e,t,o)=>new Promise((r,a)=>{var i=u=>{try{p(o.next(u));}catch(c){a(c);}},s=u=>{try{p(o.throw(u));}catch(c){a(c);}},p=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,s);p((o=o.apply(e,t)).next());});var Le=e=>{var t;return ((t=e==null?void 0:e.l10n)==null?void 0:t.language)==="es"},ce=e=>e instanceof Error,z=e=>e.kind===FootprintComponentKind.Auth,Y=e=>e.kind===FootprintComponentKind.Verify,ne=e=>e.kind===FootprintComponentKind.UpdateLoginMethods,Ve=e=>!e.className&&z(e)||!e.className&&ne(e)?"footprint-auth-button":!e.className&&Y(e)?"footprint-verify-button":"",Fe=e=>!e.label&&z(e)?Le(e)?"Autenticar con Footprint":"Authenticate with Footprint":!e.label&&Y(e)?Le(e)?"Verificar con Footprint":"Verify with Footprint":"",re=e=>{let t=e.dialogVariant||e.variant,o=t&&["modal","drawer"].some(r=>r===t);return o&&z(e)||o&&Y(e)?t:"modal"};var Ne=e=>e.bootstrapData?{"id.email":e.bootstrapData["id.email"],"id.phone_number":e.bootstrapData["id.phone_number"]}:void 0,Be=(e,t)=>m(d({},e),{kind:FootprintComponentKind.Verify,onAuth:t.onAuth,options:t.options,bootstrapData:t.bootstrapData,variant:re(t)}),Ue=(e,t)=>m(d({},e),{kind:FootprintComponentKind.Auth,options:t.options?{showLogo:t.options.showLogo}:void 0,bootstrapData:Ne(t),variant:re(t)}),Me=(e,t)=>m(d({},e),{kind:FootprintComponentKind.UpdateLoginMethods,options:t.options?{showLogo:t.options.showLogo}:void 0,bootstrapData:Ne(t),variant:re(t)});var Ke=e=>{let{authToken:t,publicKey:o}=e;return t?{authToken:t}:o?{publicKey:o}:new TypeError('Missing parameter. Please add "authToken" or "publicKey"')},Ge=e=>e.authToken?{authToken:e.authToken}:new TypeError('Missing parameter. Please add "authToken"'),He=e=>{let{authToken:t,publicKey:o,updateLoginMethods:r}=e;return o?{publicKey:o}:t&&r?{authToken:t,updateLoginMethods:r}:new TypeError('Missing parameter. Please add "authToken" with "updateLoginMethods" or "publicKey"')};var Wt=({label:e,testID:t,className:o,onClick:r},a)=>jsxs("button",{className:o,type:"button",onClick:r,"data-testid":t,ref:a,children:[jsx("svg",{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-hidden":"true",children:jsx("path",{d:"M14.66 14h2.666v-2.36a2.666 2.666 0 1 1 0-4.614V4H6.66v16h4.666v-2.666A3.333 3.333 0 0 1 14.66 14Z",fill:"#76fb8f"})}),e]}),ze=forwardRef(Wt);var Xt=e=>{let t={appearance:e.appearance,containerId:e.containerId,l10n:e.l10n,onCancel:e.onCancel,onClose:e.onClose,onComplete:e.onComplete,onError:e.onError};return z(e)?Ue(t,e):Y(e)?Be(t,e):ne(e)?Me(t,e):new TypeError("Invalid parameters")};function Zt(e){return z(e)?He(e):Y(e)?Ke(e):ne(e)?Ge(e):new TypeError("Invalid parameters")}function Jt(e){let t=Xt(e),o=Zt(e);if(ce(t))throw t;if(ce(o))throw o;return d(d({},t),o)}var Qt=(e,t)=>{let{className:o,label:r,onClick:a,testID:i}=e,s=Jt(e),p=u=>{Yt.init(s).render(),a==null||a(u);};return jsx(ze,{className:o||Ve(e),label:r||Fe(e),onClick:p,testID:i,ref:t})},Ye=forwardRef(Qt);var no=()=>{let[e,t]=useState(null);return useEffect(()=>{let o=Math.floor(Math.random()*1e3);t(`footprint-${o}`);},[]),e},ie=no;var ao=e=>{let t=ie(),{variant:o="inline"}=e;return useEffect(()=>{if(!t)return ()=>{};let r=Yt.init(m(d({kind:FootprintComponentKind.Form},e),{containerId:t}));return r.render(),()=>{r.destroy();}},[e,t]),o==="inline"&&t?jsx("div",{style:{width:"100%",height:"100%"},id:t}):null},je=ao;var co=e=>{let t=ie();return useEffect(()=>{if(!t)return ()=>{};let o=Yt.init(m(d({kind:FootprintComponentKind.Render,variant:"inline"},e),{containerId:t}));return o.render(),()=>{o.destroy();}},[e,t]),t?jsx("div",{id:t}):null},Xe=co;var go=["US","AS","GU","AF","AX","AL","AN","DZ","AS","AD","AO","AI","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BA","BQ","BW","BV","BR","IO","BN","BG","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC","CO","KM","SD","CG","CK","CR","CI","HR","CU","CW","CY","CZ","CD","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","MK","RE","RO","RU","RW","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","KR","SS","ES","LK","SR","SJ","SZ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","UM","UY","UZ","VU","VE","VN","VI","VG","WF","EH","YE","ZM","ZW"],Ze=go;var yo=["agent","c_corporation","s_corporation","b_corporation","llc","llp","non_profit","partnership","sole_proprietorship","trust","unknown"],Je=yo;var N=createContext({name:"id.email",id:"email"});var Co=a=>{var i=a,{name:e,className:t,children:o}=i,r=D(i,["name","className","children"]);let s=useId(),p=useMemo(()=>({name:e,id:s}),[e,s]);return jsx(N.Provider,{value:p,children:jsx("div",m(d({className:xt("fp-field",t)},r),{children:o}))})},ge=Co;var Ao=o=>{var r=o,{className:e}=r,t=D(r,["className"]);let{name:a}=useContext(N),{formState:{errors:i}}=useFormContext();if(!a)throw new Error("FieldErrors must be used inside a Field component");let s=_o(i,a);return s!=null&&s.message?jsx("div",m(d({className:xt("fp-field-errors",e)},t),{children:s==null?void 0:s.message.toString()})):null},ye=Ao;var Oo=18,To=120,tt=e=>new Date(e).toString()!=="Invalid Date",ot=(e,t=new Date)=>t.getFullYear()-new Date(e).getFullYear()<Oo,nt=(e,t=new Date)=>t.getFullYear()-new Date(e).getFullYear()>To,rt=(e,t=new Date)=>new Date(e)>=t;var Po=e=>/^[A-Za-z0-9]+$/.test(e),it=Po;var So=e=>{let t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,o=e.split("@")[1];return o!=null&&o.includes("..")?!1:t.test(e)},st=So;var wo=e=>{let t=e==null?void 0:e.trim();return /^([^@#$%^*()_+=~/\\<>~`[\]{}!?;:]+)$/.test(t)},se=wo;var qo=e=>{let t="+15555550100";return e.replace(/[^+\d]/g,"")===t},$o=qo,v={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/};v["en-CA"]=v["en-US"];v["fr-CA"]=v["en-CA"];v["fr-BE"]=v["nl-BE"];v["zh-HK"]=v["en-HK"];v["zh-MO"]=v["en-MO"];v["ga-IE"]=v["en-IE"];v["fr-CH"]=v["de-CH"];v["it-CH"]=v["fr-CH"];function Re(e,t={}){if(t.sandbox&&$o(e))return !0;if(Array.isArray(t.locale))return t.locale.some(o=>!!(v[o]&&v[o].test(e)));if(t.locale&&v[t.locale])return v[t.locale].test(e);if(!t.locale){for(let o in v)if(v[o]&&v[o].test(e))return !0;return !1}throw new Error(`Invalid locale '${t.locale}'`)}var Io=/^((?!(0000))\d{4})$/,Lo=e=>Io.test(e),at=Lo,Vo=/^(?!(000|666|9))(\d{3}-(?!(00))\d{2}-(?!(0000))\d{4})$/;var Fo=e=>Vo.test(e);var dt=Fo;var j=class extends Error{constructor(o,r){super(o);this.name="ApiError",this.details=r;}},B=class extends Error{constructor(t){super(t),this.name="InlineOtpNotSupported";}},K=class extends Error{constructor(t){super(t),this.name="InlineProcessError";}};var de=(e,t)=>t?e:pt(e,(o,r,a)=>{let i;ae(r)&&!Array.isArray(r)&&!(r instanceof Date)?i=de(r):Array.isArray(r)?i=r.map(s=>ae(s)&&!(s instanceof Date)?de(s):s):i=r,o[No(a)]=i;},{}),Q=(e,t)=>t?e:pt(e,(o,r,a)=>{let i;ae(r)&&!Array.isArray(r)&&!(r instanceof Date)?i=Q(r):Array.isArray(r)?i=r.map(s=>ae(s)&&!(s instanceof Date)?Q(s):s):i=r,o[Bo(a)]=i;},{});var Uo="https://api.onefootprint.com";function Mo(e){let t={};for(let o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=String(e[o]));return t}function Ko(e){return b(this,null,function*(){let _=e,{baseURL:t=Uo,url:o,headers:r={},params:a,data:i,disableCaseConverter:s}=_,p=D(_,["baseURL","url","headers","params","data","disableCaseConverter"]),u=i?Q(i,s):void 0,c=a?Q(a,s):{},y=new URLSearchParams(Mo(c)),x=new Headers({"Content-Type":"application/json",Accept:"application/json"});Object.entries(r).forEach(([R,g])=>{g&&x.set(R,g);});let h=yield fetch(`${t}${o}?${y}`,m(d({},p),{headers:x,body:u?JSON.stringify(u):void 0}));if(!h.ok){let R=yield h.json();throw R.message?new j(R.message,R):Error(h.statusText)}let f=yield h.json();return de(f,s)})}var O=Ko;var Go=e=>b(void 0,null,function*(){return yield O({method:"GET",url:"/hosted/onboarding/config",headers:{"X-Onboarding-Config-Key":e}})}),ut=Go;var Yo=({props:e,onUpdate:t})=>{let o=useRef(e),a=Object.keys(e).sort().map(i=>e[i]);useEffect(()=>{if(o.current){let i=Object.entries(e).reduce((s,[p,u])=>(o.current&&!Ho(o.current[p],u)&&(s[p]=u),s),{});Object.keys(i).length>0&&t(i);}o.current=e;},a);},lt=Yo;var L=createContext([{didCallRequiresAuth:!1,locale:"en-US",publicKey:""},()=>{}]),Qo=({appearance:e,authToken:t,children:o,publicKey:r,locale:a="en-US",sandboxOutcome:i,sandboxId:s})=>{let[p,u]=useState({appearance:e,authToken:t,locale:a,sandboxOutcome:i,sandboxId:s,publicKey:r,handoffCallbacks:{onCancel:void 0,onComplete:void 0,onError:void 0,onClose:void 0},didCallRequiresAuth:!1});lt({props:{appearance:e,authToken:t,locale:a,sandboxOutcome:i,publicKey:r,sandboxId:s},onUpdate:h=>{u(f=>d(d({},f),h));}});let c=useMemo(()=>[p,u],[p]),y=h=>{var R,g;if(h.isLive&&s)throw new Error("sandboxId is not allowed for live environments");if(h.isLive&&i)throw new Error("sandboxOutcome is not allowed for live environments");if(!h.requiresIdDoc&&(i!=null&&i.documentOutcome))throw new Error("documentOutcome is not allowed for no-document verification flow");let f=s,_=i;if(!h.isLive){if(s&&!it(s))throw new Error("sandboxId should only contain letters and numbers");s||(f=Math.random().toString(36).substring(2,14));let T=(R=i==null?void 0:i.overallOutcome)!=null?R:"pass",q=h.requiresIdDoc?(g=i==null?void 0:i.documentOutcome)!=null?g:"pass":void 0;_={overallOutcome:T,documentOutcome:q};}return {sandboxId:f,sandboxOutcome:_}},x=h=>b(void 0,null,function*(){if(!h)throw new Error("No publicKey found");let f=yield ut(h),{sandboxId:_,sandboxOutcome:R}=y(f);u(g=>m(d({},g),{onboardingConfig:f,sandboxId:_,sandboxOutcome:R}));});return useEffect(()=>{x(r);},[r]),jsx(L.Provider,{value:c,children:o})},be=Qo;var he=e=>typeof e=="string",on=(e,t)=>{if(!t||!he(t)||!e)return "";let o=new Date,r=t.trim().split("/"),a=new Intl.DateTimeFormat(e).formatToParts(o).map((u,c)=>c%2===0?u.type:u.value).join(""),i=r[0]?r[0].padStart(2,"0"):"",s=r[1]?r[1].padStart(2,"0"):"",p=r[2]?r[2]:"";return !i||!s||!p?"":a==="day/month/year"?`${s}/${i}/${p}`:`${i}/${s}/${p}`},nn=e=>{if(!e||!he(e)||Array.isArray(e))return;let[t,o,r]=e.trim().split("/");return !o||!t||!r?void 0:`${r}-${t.padStart(2,"0")}-${o.padStart(2,"0")}`},rn=()=>{let[e]=useContext(L),t=e.locale||"en-US";return {input:a=>{let i=d({},a);if("id.dob"in i){let s=i["id.dob"];if(he(s)&&/^\d{4}-\d{2}-\d{2}$/.test(s)){let[u,c,y]=s.split("-");t==="en-US"?i["id.dob"]=`${c}/${y}/${u}`:i["id.dob"]=`${y}/${c}/${u}`;}}return i},output:a=>{let i=d({},a);if(typeof i["id.dob"]=="string"){let s=on(t,i["id.dob"]);i["id.dob"]=nn(s);}return i}}},mt=rn;var ct=(e,{level:t=Number.POSITIVE_INFINITY,parentKey:o="",sep:r="."}={})=>{let a={};return t<0?(a[o]=e,a):(Object.keys(e).forEach(i=>{let s=o?`${o}${r}${i}`:i;if(sn(e[i])){let p=ct(e[i],{level:t-1,parentKey:s,sep:r});Object.keys(p).forEach(u=>{a[u]=p[u];});}else a[s]=e[i];}),a)},xe=ct;var un=i=>{var s=i,{className:e,children:t,defaultValues:o,onSubmit:r}=s,a=D(s,["className","children","defaultValues","onSubmit"]);let p=mt(),u=useForm({defaultValues:p.input(o)}),{formState:{errors:c},handleSubmit:y,setFocus:x,setValue:h}=u,f=_=>{let R=xe(_),g=p.output(R);r(g);};return jsx(FormProvider,m(d({},u),{children:jsx("form",m(d({className:xt("fp-form",e)},a),{onSubmit:y(f),children:typeof t=="function"?t({errors:xe(c,{level:1}),handleSubmit:y(f),setFocus:x,setValue:h}):t}))}))},Ce=un;var ln=(e,t)=>{let o={date:!0,datePattern:t==="en-US"?["m","d","Y"]:["d","m","Y"],delimiter:"/",numericOnly:!0},{day:r,month:a,year:i}=mn(e,o);if(!cn({day:r,month:a,year:i}))return "Invalid date";let p=`${i}-${a}-${r}`;return tt(p)?rt(p)?"Cannot be in the future":ot(p)?"Must be at least 18 years old":nt(p)?"Cannot be before than 1900":!0:"Invalid date"},mn=(e,t)=>{var y;let o=t.datePattern,r=o==null?void 0:o.indexOf("d"),a=o==null?void 0:o.indexOf("m"),i=o==null?void 0:o.indexOf("Y"),s=e.split((y=t.delimiter)!=null?y:"/");if(s.length!==3||r===void 0||a===void 0||i===void 0)return {day:"",month:"",year:""};let p=s[r],u=s[a],c=s[i];return {day:p,month:u,year:c}},cn=({day:e,month:t,year:o})=>!(e.length!==2||t.length!==2||o.length!==4),gt=ln;var yn=()=>{let[e]=useContext(L),t=e.locale,{formState:{errors:o}}=useFormContext(),r=useContext(N);if(!r.name)throw new Error("Input must be used inside a Field component");let a=Cn(r.name,{locale:t});if(!a)throw new Error(`Field ${r.name} is not supported`);let s=!!_o(o,r.name);return m(d({"aria-invalid":s,id:r.id},a),{name:r.name})},Rn=e=>({phoneNumber:{autoComplete:"tel",className:"fp-phone-input",type:"tel",validations:{required:"Phone is required",validate:t=>Re(t)?!0:"Phone is invalid"}},email:{autoComplete:"email",className:"fp-email-input",validations:{required:"Email is required",validate:t=>st(t)?!0:"Email is invalid"}},dob:{className:"fp-dob-input",inputMode:"numeric",mask:{date:!0,datePattern:e.locale==="en-US"?["m","d","Y"]:["d","m","Y"],delimiter:"/",numericOnly:!0},validations:{required:"Dob is required",validate:t=>gt(t,e.locale)}},ssn4:{autoComplete:"ssn",className:"fp-ssn-4-input",maxLength:4,mask:{numericOnly:!0,blocks:[4]},validations:{required:"SSN is required",validate:t=>at(t)?!0:"SSN is invalid"}},ssn9:{autoComplete:"ssn",className:"fp-ssn-9-input",maxLength:11,mask:{numericOnly:!0,delimiters:["-","-"],blocks:[3,2,4]},validations:{required:"SSN is required",validate:t=>dt(t)?!0:"SSN is invalid"}},firstName:{autoComplete:"given-name",className:"fp-first-name-input",validations:{required:"First name is required",validate:t=>se(t)?!0:"First name is invalid"}},middleName:{autoComplete:"additional-name",className:"fp-middle-name-input",validations:{validate:t=>t===""||se(t)?!0:"Middle name is invalid"}},lastName:{autoComplete:"family-name",className:"fp-last-name-input",validations:{required:"Last name is required",validate:t=>se(t)?!0:"Last name is invalid"}}}),bn=()=>({country:{autoComplete:"country-name",className:"fp-countrt-input",validations:{required:"Country is required"}},city:{autoComplete:"address-level2",className:"fp-city-input",validations:{required:"City is required"}},addressLine1:{autoComplete:"address-line1",className:"fp-address-line1-input",validations:{required:"Address is required"}},addressLine2:{autoComplete:"address-line2",className:"fp-address-line2-input",validations:{}},state:{className:"fp-state-input",validations:{required:"State is required"}},zip:{autoComplete:"postal-code",className:"fp-zip-input",validations:{required:"Zip is required"}},custom:{className:"fp-custom-input"}}),hn=()=>({name:{className:"fp-business-name-input",validations:{required:"Business name cannot be empty or is invalid"}},dba:{},tin:{className:"fp-business-tin-input",mask:{numericOnly:!0,delimiters:["-"],blocks:[2,7]},validations:{required:"TIN cannot be empty or is invalid",pattern:{value:/^\d{2}-\d{7}$/,message:"TIN must be in the format XX-XXXXXXX"}}},website:{type:"url",className:"fp-business-website-input",mask:{numericOnly:!0,delimiters:["-"],blocks:[2,7]},validations:{required:"Website cannot be empty"}},phoneNumber:{autoComplete:"tel",className:"fp-business-phone-input",type:"tel",mask:{prefix:"+",noImmediatePrefix:!0,numericOnly:!0},validations:{required:"Phone is required",validate:e=>Re(e)?!0:"Phone is invalid"}},corporationType:{className:"fp-business-corporation-type-input",validations:{required:"Corporation type is required"}}}),xn=()=>({ownershipStake:{className:"fp-bo-ownership-stake-input",type:"number",validations:{required:"Stake is required"},transforms:{valueAsNumber:!0}}}),Cn=(e,t)=>{let o=Rn(t),r=bn(),a=hn(),i=xn();if(e==="id.phone_number")return o.phoneNumber;if(e==="id.email")return o.email;if(e==="id.dob")return o.dob;if(e==="id.first_name")return o.firstName;if(e==="id.middle_name")return o.middleName;if(e==="id.last_name")return o.lastName;if(e==="id.ssn9")return o.ssn9;if(e==="id.ssn4")return o.ssn4;if(e==="id.country"||e==="business.country")return r.country;if(e==="id.address_line1"||e==="business.address_line1")return r.addressLine1;if(e==="id.address_line2"||e==="business.address_line2")return r.addressLine2;if(e==="id.city"||e==="business.city")return r.city;if(e==="id.state"||e==="business.state")return r.state;if(e==="id.zip"||e==="business.zip")return r.zip;if(e==="business.name")return a.name;if(e.startsWith("custom"))return r.custom;if(e==="business.dba")return a.dba;if(e==="business.tin")return a.tin;if(e==="business.website")return a.website;if(e==="business.phone_number")return a.phoneNumber;if(e==="business.corporation_type")return a.corporationType;if(e.startsWith("business.beneficial_owners")){if(e.endsWith("first_name"))return o.firstName;if(e.endsWith("middle_name"))return o.middleName;if(e.endsWith("last_name"))return o.lastName;if(e.endsWith("phone_number"))return o.phoneNumber;if(e.endsWith("emai;"))return o.email;if(e.endsWith("ownership_stake"))return i.ownershipStake}return null},pe=yn;var An=r=>{var a=r,{className:e,id:t}=a,o=D(a,["className","id"]);let{register:i}=useFormContext(),_=pe(),{name:p,className:u,mask:c,validations:y={},transforms:x={}}=_,h=D(_,["name","className","mask","validations","transforms"]);useEffect(()=>{let R=null;return c&&(R=new _n(`.${u}`,c)),()=>{R&&R.destroy();}});let f=d(d({},y),x);return jsx("input",d(m(d(d({},h),o),{className:xt("fp-input",u,e)}),i(p,m(d({},f),{onBlur:o.onBlur,onChange:o.onChange}))))},ve=An;var Pn=a=>{var i=a,{className:e,children:t,htmlFor:o}=i,r=D(i,["className","children","htmlFor"]);let{id:s}=useContext(N);if(!s)throw new Error("Label must be used inside a Field component");return jsx("label",m(d({htmlFor:o||s,className:xt("fp-label",e)},r),{children:t}))},_e=Pn;var Ln=e=>{let[t,o]=useState([]),r=useCallback(s=>{var p;return (p=t[s-1])==null?void 0:p.current},[t]),a=useCallback(s=>{var p;return (p=t[s+1])==null?void 0:p.current},[t]),i=useCallback(s=>{var p;return (p=t[s])==null?void 0:p.current},[t]);return useEffect(()=>{o(s=>Array(e).fill("").map((p,u)=>s[u]||createRef()));},[e]),useMemo(()=>({refs:t,previous:r,next:a,get:i}),[i,a,r,t])},Rt=Ln;var bt=Array(6).fill("");var De=e=>/^[0-9]+$/.test(e),ht=(e,t)=>{let o=t;return (e==null?void 0:e.length)>0&&(e[0]===t.charAt(0)?o=t.charAt(1):e[0]===t.charAt(1)&&(o=t.charAt(0))),o};var Bn=s=>{var p=s,{containerClassName:e,onComplete:t,disabled:o,className:r,autoFocus:a}=p,i=D(p,["containerClassName","onComplete","disabled","className","autoFocus"]);let[u,c]=useState([]),y=Rt(6);useEffect(()=>{let R=y.get(0);R&&!o&&a&&R.focus();},[a,o,y]);let x=(R,g)=>{let T=[...u];return T[g]=R,c(T),T},h=(R,g)=>{let T=g===6-1,q=R.length===6&&Array.from(R).every(Vn);if(T&&q)t(R);else {let V=y.next(g);V&&requestAnimationFrame(()=>{V.focus(),V.select();});}},f=R=>g=>{let T=g.target.value,q=u[R],V=ht(q,T);if(V===""&&x("",R),T.length>2){if(De(T)){let l=Array.from(T).filter((E,w)=>w<6);c(l),h(l.join(""),l.length-1);}}else if(De(V)){let l=x(V,R);h(l.join(""),R);}},_=R=>g=>{let T=g.target;if(g.key==="Backspace"&&T.value===""){let q=y.previous(R);q&&(x("",R-1),q.focus());}};return jsx("div",{className:xt("fp-pin-input-container",e),children:bt.map((R,g)=>{let T=g,q=g>u.length;return jsx("input",d({autoComplete:"one-time-code",inputMode:"numeric",disabled:o||q,onChange:f(g),onKeyDown:_(g),placeholder:"",ref:y.refs[g],required:!0,type:"tel",value:u[g]||"",className:xt("fp-input fp-pin-input",r)},i),T)})})},Ae=Bn;var Kn=a=>{var i=a,{children:e,className:t,id:o}=i,r=D(i,["children","className","id"]);let{register:s}=useFormContext(),_=pe(),{name:u,className:c,validations:y={},transforms:x={}}=_,h=D(_,["name","className","validations","transforms"]),f=d(d({},y),x);return jsx("select",m(d(m(d(d({},h),r),{className:xt("fp-select",c,t)}),s(u,f)),{children:e}))},Ee=Kn;var X=(g=>(g.name="business.name",g.doingBusinessAs="business.dba",g.website="business.website",g.phoneNumber="business.phone_number",g.tin="business.tin",g.corporationType="business.corporation_type",g.beneficialOwners="business.beneficial_owners",g.kycedBeneficialOwners="business.kyced_beneficial_owners",g.addressLine1="business.address_line1",g.addressLine2="business.address_line2",g.city="business.city",g.state="business.state",g.country="business.country",g.zip="business.zip",g.formationState="business.formation_state",g.formationDate="business.formation_date",g))(X||{}),G=(f=>(f.employmentStatus="investor_profile.employment_status",f.occupation="investor_profile.occupation",f.employer="investor_profile.employer",f.annualIncome="investor_profile.annual_income",f.netWorth="investor_profile.net_worth",f.investmentGoals="investor_profile.investment_goals",f.riskTolerance="investor_profile.risk_tolerance",f.declarations="investor_profile.declarations",f.seniorExecutiveSymbols="investor_profile.senior_executive_symbols",f.familyMemberNames="investor_profile.family_member_names",f.politicalOrganization="investor_profile.political_organization",f.brokerageFirmEmployer="investor_profile.brokerage_firm_employer",f.fundingSources="investor_profile.funding_sources",f))(G||{}),Z=(l=>(l.firstName="id.first_name",l.middleName="id.middle_name",l.lastName="id.last_name",l.email="id.email",l.phoneNumber="id.phone_number",l.dob="id.dob",l.ssn9="id.ssn9",l.ssn4="id.ssn4",l.addressLine1="id.address_line1",l.addressLine2="id.address_line2",l.city="id.city",l.state="id.state",l.country="id.country",l.zip="id.zip",l.nationality="id.nationality",l.usLegalStatus="id.us_legal_status",l.visaKind="id.visa_kind",l.visaExpirationDate="id.visa_expiration_date",l.citizenships="id.citizenships",l.usTaxId="id.us_tax_id",l.itin="id.itin",l))(Z||{}),H=(n=>(n.finraComplianceLetter="document.finra_compliance_letter",n.latestPassport="document.passport.front.latest_upload",n.latestPassportSelfie="document.passport.selfie.latest_upload",n.passportFullName="document.passport.full_name",n.passportDOB="document.passport.dob",n.passportGender="document.passport.gender",n.passportFullAddress="document.passport.full_address",n.passportDocumentNumber="document.passport.document_number",n.passportIssuedAt="document.passport.issued_at",n.passportExpiresAt="document.passport.expires_at",n.passportIssuingState="document.passport.issuing_state",n.passportIssuingCountry="document.passport.issuing_country",n.passportRefNumber="document.passport.ref_number",n.passportNationality="document.passport.nationality",n.passportClassifiedDocumentType="document.passport.classifed_document_type",n.passportCurp="document.passport.curp",n.passportCurpValidationResponse="document.passport.curp_validation_response",n.latestDriversLicenseFront="document.drivers_license.front.latest_upload",n.latestDriversLicenseBack="document.drivers_license.back.latest_upload",n.latestDriversLicenseSelfie="document.drivers_license.selfie.latest_upload",n.driversLicenseFullName="document.drivers_license.full_name",n.driversLicenseDOB="document.drivers_license.dob",n.driversLicenseGender="document.drivers_license.gender",n.driversLicenseFullAddress="document.drivers_license.full_address",n.driversLicenseDocumentNumber="document.drivers_license.document_number",n.driversLicenseIssuedAt="document.drivers_license.issued_at",n.driversLicenseExpiresAt="document.drivers_license.expires_at",n.driversLicenseIssuingState="document.drivers_license.issuing_state",n.driversLicenseIssuingCountry="document.drivers_license.issuing_country",n.driversLicenseRefNumber="document.drivers_license.ref_number",n.driversLicenseNationality="document.drivers_license.nationality",n.driversLicenseClassifiedDocumentType="document.drivers_license.classifed_document_type",n.driversLicenseCurp="document.drivers_license.curp",n.driversLicenseCurpValidationResponse="document.drivers_license.curp_validation_response",n.latestIdCardFront="document.id_card.front.latest_upload",n.latestIdCardBack="document.id_card.back.latest_upload",n.latestIdCardSelfie="document.id_card.selfie.latest_upload",n.idCardFullName="document.id_card.full_name",n.idCardDOB="document.id_card.dob",n.idCardGender="document.id_card.gender",n.idCardFullAddress="document.id_card.full_address",n.idCardDocumentNumber="document.id_card.document_number",n.idCardIssuedAt="document.id_card.issued_at",n.idCardExpiresAt="document.id_card.expires_at",n.idCardIssuingState="document.id_card.issuing_state",n.idCardIssuingCountry="document.id_card.issuing_country",n.idCardRefNumber="document.id_card.ref_number",n.idCardNationality="document.id_card.nationality",n.idCardClassifiedDocumentType="document.id_card.classifed_document_type",n.idCardCurp="document.id_card.curp",n.idCardCurpValidationResponse="document.id_card.curp_validation_response",n.latestVisa="document.visa.front.latest_upload",n.latestVisaSelfie="document.visa.selfie.latest_upload",n.visaFullName="document.visa.full_name",n.visaDOB="document.visa.dob",n.visaGender="document.visa.gender",n.visaFullAddress="document.visa.full_address",n.visaDocumentNumber="document.visa.document_number",n.visaIssuedAt="document.visa.issued_at",n.visaExpiresAt="document.visa.expires_at",n.visaIssuingState="document.visa.issuing_state",n.visaIssuingCountry="document.visa.issuing_country",n.visaRefNumber="document.visa.ref_number",n.visaNationality="document.visa.nationality",n.visaClassifiedDocumentType="document.visa.classifed_document_type",n.visaCurp="document.visa.curp",n.visaCurpValidationResponse="document.visa.curp_validation_response",n.latestResidenceDocumentFront="document.residence_document.front.latest_upload",n.latestResidenceDocumentBack="document.residence_document.back.latest_upload",n.latestResidenceDocumentSelfie="document.residence_document.selfie.latest_upload",n.residenceDocumentFullName="document.residence_document.full_name",n.residenceDocumentDOB="document.residence_document.dob",n.residenceDocumentGender="document.residence_document.gender",n.residenceDocumentFullAddress="document.residence_document.full_address",n.residenceDocumentDocumentNumber="document.residence_document.document_number",n.residenceDocumentIssuedAt="document.residence_document.issued_at",n.residenceDocumentExpiresAt="document.residence_document.expires_at",n.residenceDocumentIssuingState="document.residence_document.issuing_state",n.residenceDocumentIssuingCountry="document.residence_document.issuing_country",n.residenceDocumentRefNumber="document.residence_document.ref_number",n.residenceDocumentNationality="document.residence_document.nationality",n.residenceDocumentClassifiedDocumentType="document.residence_document.classifed_document_type",n.residenceDocumentCurp="document.residence_document.curp",n.residenceDocumentCurpValidationResponse="document.residence_document.curp_validation_response",n.latestWorkPermitFront="document.permit.front.latest_upload",n.latestWorkPermitBack="document.permit.back.latest_upload",n.latestWorkPermitSelfie="document.permit.selfie.latest_upload",n.workPermitFullName="document.permit.full_name",n.workPermitDOB="document.permit.dob",n.workPermitGender="document.permit.gender",n.workPermitFullAddress="document.permit.full_address",n.workPermitDocumentNumber="document.permit.document_number",n.workPermitIssuedAt="document.permit.issued_at",n.workPermitExpiresAt="document.permit.expires_at",n.workPermitIssuingState="document.permit.issuing_state",n.workPermitIssuingCountry="document.permit.issuing_country",n.workPermitRefNumber="document.permit.ref_number",n.workPermitNationality="document.permit.nationality",n.workPermitClassifiedDocumentType="document.permit.classifed_document_type",n.workPermitCurp="document.permit.curp",n.workPermitCurpValidationResponse="document.permit.curp_validation_response",n.latestVoterIdentificationFront="document.voter_identification.front.latest_upload",n.latestVoterIdentificationBack="document.voter_identification.back.latest_upload",n.latestVoterIdentificationSelfie="document.voter_identification.selfie.latest_upload",n.voterIdentificationFullName="document.voter_identification.full_name",n.voterIdentificationDOB="document.voter_identification.dob",n.voterIdentificationGender="document.voter_identification.gender",n.voterIdentificationFullAddress="document.voter_identification.full_address",n.voterIdentificationDocumentNumber="document.voter_identification.document_number",n.voterIdentificationIssuedAt="document.voter_identification.issued_at",n.voterIdentificationExpiresAt="document.voter_identification.expires_at",n.voterIdentificationIssuingState="document.voter_identification.issuing_state",n.voterIdentificationIssuingCountry="document.voter_identification.issuing_country",n.voterIdentificationRefNumber="document.voter_identification.ref_number",n.voterIdentificationNationality="document.voter_identification.nationality",n.voterIdentificationClassifiedDocumentType="document.voter_identification.classifed_document_type",n.voterIdentificationCurp="document.voter_identification.curp",n.voterIdentificationCurpValidationResponse="document.voter_identification.curp_validation_response",n.latestPassportCardFront="document.passport_card.front.latest_upload",n.latestPassportCardBack="document.passport_card.back.latest_upload",n.latestPassportCardSelfie="document.passport_card.selfie.latest_upload",n.passportCardFullName="document.passport_card.full_name",n.passportCardDOB="document.passport_card.dob",n.passportCardGender="document.passport_card.gender",n.passportCardFullAddress="document.passport_card.full_address",n.passportCardDocumentNumber="document.passport_card.document_number",n.passportCardIssuedAt="document.passport_card.issued_at",n.passportCardExpiresAt="document.passport_card.expires_at",n.passportCardIssuingState="document.passport_card.issuing_state",n.passportCardIssuingCountry="document.passport_card.issuing_country",n.passportCardRefNumber="document.passport_card.ref_number",n.passportCardNationality="document.passport_card.nationality",n.passportCardClassifiedDocumentType="document.passport_card.classifed_document_type",n.passportCardCurp="document.passport_card.curp",n.passportCardCurpValidationResponse="document.passport_card.curp_validation_response",n.latestLeaseFront="document.lease.front.image",n.latestBankStatementFront="document.bank_statement.front.image",n.latestUtilityBillFront="document.utility_bill.front.image",n.ssnCard="document.ssn_card.image",n.proofOfAddress="document.proof_of_address.image",n))(H||{});[...Object.values(X),...Object.values(G),...Object.values(Z),...Object.values(H)];var ir={["name"]:["id.first_name","id.middle_name","id.last_name"],["dob"]:["id.dob"],["ssn4"]:["id.ssn4"],["ssn9"]:["id.ssn9"],["us_tax_id"]:["id.us_tax_id"],["full_address"]:["id.address_line1","id.address_line2","id.city","id.state","id.zip","id.country"],["email"]:["id.email"],["phone_number"]:["id.phone_number"],["nationality"]:["id.nationality"],["us_legal_status"]:["id.us_legal_status","id.visa_kind","id.visa_expiration_date","id.citizenships","id.nationality"],["business_name"]:["business.name","business.dba"],["business_tin"]:["business.tin"],["business_address"]:["business.address_line1","business.address_line2","business.city","business.state","business.zip","business.country"],["business_phone_number"]:["business.phone_number"],["business_website"]:["business.website"],["business_corporation_type"]:["business.corporation_type"],["business_beneficial_owners"]:["business.beneficial_owners"],["business_kyced_beneficial_owners"]:["business.kyced_beneficial_owners"],["document"]:["document.passport.front.latest_upload","document.drivers_license.back.latest_upload","document.drivers_license.front.latest_upload","document.id_card.back.latest_upload","document.id_card.front.latest_upload"],["document_and_selfie"]:[...Object.values(H).map(e=>e)],["investor_profile"]:["document.finra_compliance_letter",...Object.values(G).map(e=>e)],card:[]},W=ir;var Pe=(e,t)=>b(void 0,null,function*(){let i=e,{authToken:o}=i,r=D(i,["authToken"]);return yield O({url:"/hosted/identify",method:"POST",data:m(d({},r),{scope:"onboarding"}),headers:{"X-Onboarding-Config-Key":t.onboardingConfig,"X-Sandbox-Id":t.sandboxId,"X-Fp-Authorization":o}})}),Wi=(e,t)=>b(void 0,null,function*(){var i;let o=(i=t.requiredAuthMethods)!=null&&i.includes("phone")?"sms":"email",r=d(d({scope:"onboarding",challengeKind:o},e.email&&{email:{value:e.email,isBootstrap:!1}}),e.phoneNumber&&{phoneNumber:{value:e.phoneNumber,isBootstrap:!1}});return yield O({url:"/hosted/identify/signup_challenge",method:"POST",data:r,headers:{"X-Onboarding-Config-Key":t.onboardingConfig,"X-Sandbox-Id":t.sandboxId,"X-Fp-Is-Components-Sdk":"true"}})}),Ot=(e,t)=>b(void 0,null,function*(){return yield O({url:"/hosted/identify/login_challenge",method:"POST",data:{preferredChallengeKind:e.kind},headers:{"X-Fp-Authorization":t.token}})}),Se=(e,t)=>b(void 0,null,function*(){let o=yield Pe(e,t);if(o.user&&o.user.authMethods){if(!o.user.authMethods.some(p=>p.isVerified))throw new B("Cannot verify inline");let i=o.user.authMethods.some(p=>p.kind==="phone"&&p.isVerified),s=o.user.authMethods.some(p=>p.kind==="email"&&p.isVerified);if(t.requiredAuthMethods){if(t.requiredAuthMethods.includes("phone")&&!i)throw new B("Inline OTP not supported - phone is required but has not been verified");if(t.requiredAuthMethods.includes("email")&&!s)throw new B("Inline OTP not supported - email is required but has not been verified")}if(i)return yield Ot({kind:"sms"},{token:o.user.token});if(s)return yield Ot({kind:"email"},{token:o.user.token});throw new B("Cannot verify inline")}return yield Wi(e,t)}),zi=(e,t)=>b(void 0,null,function*(){return yield O({url:"/hosted/identify/verify",method:"POST",data:{challengeResponse:e.challenge,challengeToken:e.challengeToken,scope:"onboarding"},headers:{"X-Fp-Authorization":t.token}})}),J=e=>b(void 0,null,function*(){return yield O({url:"/hosted/identify/validation_token",method:"POST",headers:{"X-Fp-Authorization":e.authToken}})}),we=e=>b(void 0,null,function*(){var o;return yield O({url:"/hosted/onboarding",method:"POST",data:{fixture_result:(o=e.sandboxOutcome)==null?void 0:o.overallOutcome},headers:{"X-Fp-Authorization":e.authToken}})}),ee=t=>b(void 0,[t],function*({authToken:e}){return yield O({url:"/hosted/user/tokens",method:"POST",headers:{"X-Fp-Authorization":e},data:{requestedScope:"onboarding_components"}})}),Tt=(e,t)=>b(void 0,null,function*(){let{authToken:o}=yield zi(e,t),[,r]=yield Promise.all([we({authToken:o,sandboxOutcome:t.sandboxOutcome}),ee({authToken:o})]);return {authToken:o,vaultingToken:r.token}});var Yi=e=>b(void 0,null,function*(){let t=yield O({method:"GET",url:"/hosted/onboarding/status",headers:{"X-Fp-Authorization":e.authToken}}),o={missing:[],optional:[],collected:[]},r=t.allRequirements.map(s=>{var y,x,h;let p=((y=s.optionalAttributes)==null?void 0:y.flatMap(f=>W[f]))||[],u=((x=s.populatedAttributes)==null?void 0:x.flatMap(f=>W[f]))||[],c=((h=s.missingAttributes)==null?void 0:h.flatMap(f=>W[f]).filter(f=>f!=="id.address_line2"))||[];return o.optional.push(...p),o.collected.push(...u),o.missing.push(...c),s}),a=r.filter(s=>!s.isMet),i=a.length===0;return {requirements:{all:r,isCompleted:i,isMissing:!i,missing:a},fields:o}}),te=Yi;var ji=e=>b(void 0,null,function*(){return yield O({method:"POST",url:"/hosted/onboarding/process",headers:{"X-Fp-Authorization":e.token}})}),Pt=ji;var St="X-Fp-Authorization";var Xi=e=>{let t=Object.entries(e).some(([r])=>r.startsWith("id.")),o=Object.entries(e).some(([r])=>r.startsWith("business."));return {hasId:t,hasBusiness:o}},Zi=e=>b(void 0,null,function*(){let t=e.data;if(!Object.entries(t).length)return {};let{hasId:r,hasBusiness:a}=Xi(t);if(r&&a)throw new Error("You can't submit id and business at the same time");return yield O({method:"PATCH",url:a?"/hosted/business/vault":"/hosted/user/vault",data:t,disableCaseConverter:!0,headers:{[St]:e.authToken}})}),wt=Zi;var qt="footprint-body-locked",$t=()=>{document.body.classList.remove(qt);},It=()=>{document.body.classList.add(qt);};var Ji=e=>Object.fromEntries(Object.entries(e).filter(([t,o])=>!!o)),Qi=(e,t)=>t?Object.fromEntries(Object.entries(e).filter(([o,r])=>r!==t[o])):e,es=(e,t)=>{let o=Qi(e,t.vaultValues);return Ji(o)},Lt=es;var ts=o=>b(void 0,[o],function*({fields:e,authToken:t}){let r=e.filter(i=>i!=="id.ssn9"&&i!=="id.ssn4"&&i!=="id.us_tax_id"&&!i.startsWith("document."));return yield O({method:"POST",url:"/hosted/user/vault/decrypt",data:{fields:r},disableCaseConverter:!0,headers:{"X-Fp-Authorization":t}})}),Vt=ts;var Ft=(r=>(r.validWithSufficientScope="validWithSufficientScope",r.validWithInsufficientScope="validWithInsufficientScope",r.invalid="invalid",r))(Ft||{}),$=Ft;var os=i=>b(void 0,[i],function*({publicKey:e,authToken:t,sandboxId:o,setContext:r,sandboxOutcome:a}){var s;try{let u=(s=(yield Pe({authToken:t},{sandboxId:o,onboardingConfig:e})).user)==null?void 0:s.tokenScopes;if(u!=null&&u.length){yield J({authToken:t}),yield we({authToken:t,sandboxOutcome:a});let c=yield ee({authToken:t});return r(y=>m(d({},y),{verifiedAuthToken:t,authTokenStatus:$.validWithSufficientScope,vaultingToken:c.token})),$.validWithSufficientScope}return r(c=>m(d({},c),{authTokenStatus:$.validWithInsufficientScope})),$.validWithInsufficientScope}catch(p){throw r(u=>m(d({},u),{authTokenStatus:$.invalid})),new Error("Error identifying authToken. Please check your token")}}),Nt=os;var ss=()=>{let[e,t]=useContext(L),{appearance:o,authToken:r,authTokenStatus:a,challengeData:i,didCallRequiresAuth:s,onboardingConfig:p,publicKey:u,sandboxId:c,sandboxOutcome:y,vaultingToken:x,verifiedAuthToken:h}=e,f=!!p,_=l=>{if(l===$.validWithSufficientScope||l===$.validWithInsufficientScope)return !1;throw new Error("Invalid auth token. Please use a valid auth token.")},R=()=>b(void 0,null,function*(){if(x)return t(l=>m(d({},l),{didCallRequiresAuth:!0})),!1;if(h){let l=yield ee({authToken:h});return t(E=>m(d({},E),{vaultingToken:l.token,didCallRequiresAuth:!0})),!1}if(r){if(!a){let l=yield Nt({authToken:r,publicKey:u,sandboxId:c,sandboxOutcome:y,setContext:t});return t(E=>m(d({},E),{didCallRequiresAuth:!0})),_(l)}return t(l=>m(d({},l),{didCallRequiresAuth:!0})),_(a)}return t(l=>m(d({},l),{didCallRequiresAuth:!0})),!0}),g=({email:l,phoneNumber:E},{onAuthenticated:w,onError:P}={})=>{if(r&&(E||l)){P==null||P(new Error("You provided an auth token. Please authenticate using it or remove the auth token and authenticate using email/phone number"));return}let I=r?{authToken:r}:{publicKey:u},F=Yt.init(m(d({},I),{sandboxId:c,sandboxOutcome:y,appearance:o,bootstrapData:{"id.phone_number":E,"id.email":l},kind:FootprintComponentKind.Components,shouldRelayToComponents:!0,onComplete:C=>{t(k=>{var S,M;return (M=(S=k.handoffCallbacks)==null?void 0:S.onComplete)==null||M.call(S,C),k});},onError:C=>{P==null||P(C),t(k=>{var S,M;return (M=(S=k.handoffCallbacks)==null?void 0:S.onError)==null||M.call(S,C),k});},onCancel:()=>{t(C=>{var k,S;return (S=(k=C.handoffCallbacks)==null?void 0:k.onCancel)==null||S.call(k),C});},onClose:()=>{t(C=>{var k,S;return (S=(k=C.handoffCallbacks)==null?void 0:k.onClose)==null||S.call(k),C});},onRelayToComponents:S=>b(void 0,[S],function*({authToken:C,vaultingToken:k}){$t(),t(Ut=>m(d({},Ut),{authToken:C,vaultingToken:k}));let M=yield le(C);w==null||w(M);})}));F.render(),t(C=>m(d({},C),{fpInstance:F}));},T=w=>b(void 0,[w],function*({email:l,phoneNumber:E}){let{sandboxId:P,onboardingConfig:I,authToken:F}=e;if(!I)throw new Error("No onboardingConfig found. Please make sure that the publicKey is correct");if(F)throw new Error("You provided an auth token. Please authenticate using it or remove the auth token and authenticate using email/phone number");if(!l&&!E)throw new Error("Email and/or phone number are required");let C=I.requiredAuthMethods;if((C==null?void 0:C.length)===1){if(!l&&C.includes("email"))throw new Error("Email is required");if(!E&&C.includes("phone"))throw new Error("Phone number is required")}let k=yield Se({email:l,phoneNumber:E},{onboardingConfig:I.key,sandboxId:P,requiredAuthMethods:C});return t(S=>m(d({},S),{challengeData:k.challengeData})),k.challengeData.challengeKind}),q=()=>b(void 0,null,function*(){let{sandboxId:l,onboardingConfig:E,authToken:w,authTokenStatus:P}=e;if(!s)throw new Error('Please call "requiresAuth" to check the available auth methods before creating a challenge');if(!E)throw new Error("Onboarding config not found. Please check your public key");if(!w)throw new Error("Auth token not found. Please authenticate using email/phone number");if(P===$.invalid)throw new Error("Auth token is invalid. Please use a valid auth token");let I=E.requiredAuthMethods,F=yield Se({authToken:w},{onboardingConfig:E.key,sandboxId:l,requiredAuthMethods:I});return t(C=>m(d({},C),{challengeData:F.challengeData})),F.challengeData.challengeKind}),V=l=>b(void 0,null,function*(){if(!i)throw new Error("No challengeData found. Please make sure that the publicKey is correct");if(!p)throw new Error("Onboarding config not found. Please check your public key");let{vaultingToken:E,authToken:w}=yield Tt({challenge:l.verificationCode,challengeToken:i==null?void 0:i.challengeToken},{token:i.token,sandboxOutcome:y});return t(P=>m(d({},P),{vaultingToken:E,verifiedAuthToken:w,authTokenStatus:$.validWithSufficientScope})),le(w)}),le=l=>b(void 0,null,function*(){let[{validationToken:E},{requirements:w,fields:P}]=yield Promise.all([J({authToken:l}),te({authToken:l})]),I=yield Vt({authToken:l,fields:[...P.collected,...P.missing,...P.optional]});return t(F=>m(d({},F),{vaultData:I})),{validationToken:E,requirements:w,vaultData:I,fields:P}});return {launchIdentify:g,createEmailPhoneBasedChallenge:T,createAuthTokenBasedChallenge:q,verify:V,requiresAuth:R,isReadyForAuth:f}},Bt=ss;var us=()=>{let[e,t]=useContext(L),o=Bt(),r=u=>b(void 0,null,function*(){let{verifiedAuthToken:c,onboardingConfig:y}=e;if(!c)throw new Error("No authToken found. Please authenticate first");if(!y)throw new Error("No onboardingConfig found. Make sure that the publicKey is correct");if(y.kind!=="kyc"&&y.kind!=="kyb")throw new Error("Onboarding components only support kyc and kyb kind");let x=Lt(u,{vaultValues:e.vaultData});yield wt({data:x,bootstrapDis:[],authToken:c}),t(m(d({},e),{vaultData:d(d({},e.vaultData),x)}));}),a=()=>{if(!e.verifiedAuthToken)throw new Error("No authToken found. Please authenticate first");return te({authToken:e.verifiedAuthToken})},i=()=>b(void 0,null,function*(){if(!e.verifiedAuthToken)throw new Error("No authToken found. Please authenticate first");try{yield Pt({token:e.verifiedAuthToken});}catch(y){throw new K(y.message||"Something happened")}let[{requirements:u},{validationToken:c}]=yield Promise.all([te({authToken:e.verifiedAuthToken}),J({authToken:e.verifiedAuthToken})]);return u.all.forEach(y=>{if(!y.isMet)throw new K("Something happened")}),{validationToken:c,requirements:u}}),s=({onComplete:u,onError:c,onCancel:y,onClose:x,authToken:h})=>{Yt.init({authToken:h,appearance:e.appearance,sandboxOutcome:e.sandboxOutcome,kind:FootprintComponentKind.Components,onComplete:u,onError:c,onCancel:y,onClose:x}).render();};return m(d({getRequirements:a,handoff:({onComplete:u,onError:c,onCancel:y,onClose:x}={})=>{var h,f;if(e.fpInstance)It(),(f=(h=e.fpInstance).relayFromComponents)==null||f.call(h),t(_=>m(d({},_),{handoffCallbacks:{onComplete:u,onError:c,onCancel:y,onClose:x}}));else {if(!e.vaultingToken||!e.verifiedAuthToken){c==null||c(new Error("No fpInstance found"));return}s({onComplete:u,onError:c,onCancel:y,onClose:x,authToken:e.verifiedAuthToken});}},process:i,vault:r},o),{data:{onboardingConfig:e.onboardingConfig,challengeData:e.challengeData,vaultData:e.vaultData}})},ls=us;var Ym={Field:ge,Provider:be,PinInput:Ae,FieldErrors:ye,Form:Ce,Input:ve,Select:Ee,Label:_e};var ec=Yt;

export { j as ApiError, $ as AuthTokenStatus, Je as CORPORATION_TYPES, Ze as COUNTRY_CODES, Ye as FootprintButton, je as FootprintForm, Xe as FootprintRender, Ym as Fp, B as InlineOtpNotSupported, K as InlineProcessError, ec as default, ls as useFootprint };
