'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var we = require('query-string');
var reactNative = require('react-native');
var reactNativeInappbrowserReborn = require('react-native-inappbrowser-reborn');
var lodash = require('lodash');
var fe = require('react');
var reactHookForm = require('react-hook-form');
var We = require('lodash/get');
var ze = require('lodash/isPlainObject');
var Ot = require('react-native-mask-input');
var validator = require('validator');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var we__default = /*#__PURE__*/_interopDefault(we);
var fe__default = /*#__PURE__*/_interopDefault(fe);
var We__default = /*#__PURE__*/_interopDefault(We);
var ze__default = /*#__PURE__*/_interopDefault(ze);
var Ot__default = /*#__PURE__*/_interopDefault(Ot);

var ve=({appearance:e,l10n:t,redirectUrl:o,token:r})=>{let i=ke(),a=De({appearance:e,l10n:t,redirectUrl:o});return `${i}?${a}#${r}`},j=e=>e&&Object.keys(e).length?encodeURIComponent(JSON.stringify(e)):"",ke=()=>"https://id.onefootprint.com",De=({appearance:e,l10n:t,redirectUrl:o})=>{let r=new URLSearchParams;if(o&&r.append("redirect_url",o),e){let i=j(e.variables),a=j(e.rules);i&&r.append("variables",i),a&&r.append("rules",a),e.fontSrc&&r.append("font_src",e.fontSrc),t?.language&&r.append("lng",t.language);}return r.toString()},S=ve;var E="2.0.0-beta.1";var g="https://api.onefootprint.com",O="verify_v1",R="footprint-react-native",z=E;var Te=e=>e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`),q=e=>t=>{if(!t||typeof t!="object")return t;let o=Object.entries(t).map(([r,i])=>{let a;return Array.isArray(i)?a=i.map(q(e)):Object(i)===i?a=q(e)(i):a=i,[e(r),a]});return Object.fromEntries(o)},Se=q(Te),w=Se;var Ee=(e,t,o)=>{let r={tenantDomain:o,sdkKind:O,sdkName:R,sdkVersion:E,logLevel:t,logMessage:e};fetch(`${g}/org/sdk_telemetry`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w(r))});},k=Ee;var Q=e=>{if(typeof e=="string")return e;if(typeof e!="object")return "Something went wrong";if(e.message)return e.message;try{return JSON.stringify(e)}catch{}return "Something went wrong"},ee="@onefootprint/footprint-react-native",C=e=>{let t=Q(e),o=`${ee}: ${t}`;return reactNative.Linking.getInitialURL().then(r=>{k(t,"error",r??"");}).catch(()=>{k(t,"error");}),o},b=e=>{let t=Q(e),o=`${ee}: ${t}`;return reactNative.Linking.getInitialURL().then(r=>{k(t,"warn",r??"");}).catch(()=>{k(t,"warn");}),o};var Oe=3,te=async(e,t)=>fetch(`${g}/org/sdk_args`,{method:"POST",headers:{"x-fp-client-version":`${R} ${z}`,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o=>{if(o.ok)return o.json();if(t>0)return te(e,t-1)}),Re=async(e,t)=>{let o=await te({kind:O,data:{...w({publicKey:e.publicKey,authToken:e.authToken,userData:e.bootstrapData,options:e.options,l10n:e.l10n}),is_components_sdk:t?.isComponentSdk}},Oe);return o?o.token:void 0},N=Re;var oe=()=>{let e="footprint";return reactNative.Platform.OS==="android"?`${e}://callback/`:`${e}://`},Me=()=>{let e=!1,t=(s,n)=>{d();let u=C(n);s.onError?.(u);},o=s=>{d(),s.onCancel?.();},r=(s,n)=>{d(),s.onComplete?.(n);},i=async s=>{if(e){b("Footprint is already open.");return}e=!0;let n=await N({publicKey:s.publicKey,authToken:s.authToken,bootstrapData:s.bootstrapData,options:s.options,l10n:s.l10n});if(!n){t(s,"Unable to get SDK args token.");return}try{let u=await m(s,n);u.type!=="success"?o(s):p(s,u.url);}catch(u){t(s,`${u}`);}},a=s=>(reactNativeInappbrowserReborn.InAppBrowser.warmup(),{render:()=>i(s)}),l=()=>{d();},p=(s,n)=>{if(!n){b("Missing result URL."),o(s);return}let u=oe(),y=n.replace(u,""),f=we__default.default.parse(y);if(f.canceled){o(s);return}let x=f.validation_token;x&&typeof x=="string"?r(s,x):(b("Missing validation token."),o(s));},m=async(s,n)=>{let u=oe(),y=S({appearance:s.appearance,l10n:s.l10n,redirectUrl:u,token:n});if(!await reactNativeInappbrowserReborn.InAppBrowser.isAvailable())throw new Error("InAppBrowser is not available.");return await reactNativeInappbrowserReborn.InAppBrowser.openAuth(y,u,{ephemeralWebSession:!0})},d=()=>{e=!1;try{reactNativeInappbrowserReborn.InAppBrowser.close();}catch{}};return {init:a,destroy:l}},Pe=Me();var Le=["agent","c_corporation","s_corporation","b_corporation","llc","llp","non_profit","partnership","sole_proprietorship","trust","unknown"],V=Le;var Fe=["US","AS","GU","AF","AX","AL","AN","DZ","AS","AD","AO","AI","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BA","BQ","BW","BV","BR","IO","BN","BG","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC","CO","KM","SD","CG","CK","CR","CI","HR","CU","CW","CY","CZ","CD","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","MK","RE","RO","RU","RW","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","KR","SS","ES","LK","SR","SJ","SZ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","UM","UY","UZ","VU","VE","VN","VI","VG","WF","EH","YE","ZM","ZW"],G=Fe;var _=fe.createContext({name:"id.email",id:"email"});var Ie=({name:e,children:t})=>{let o=fe.useId(),r=fe.useMemo(()=>({name:e,id:o}),[e,o]),{formState:{errors:i}}=reactHookForm.useFormContext(),a=lodash.get(i,e);return fe__default.default.createElement(_.Provider,{value:r},t?.({error:a}))},I=Ie;var je=({...e})=>{let{name:t}=fe.useContext(_),{formState:{errors:o}}=reactHookForm.useFormContext();if(!t)throw new Error("FieldErrors must be used inside a Field component");let r=We__default.default(o,t);return r?.message?fe__default.default.createElement(reactNative.Text,{...e},r?.message.toString()):null},W=je;var et=({children:e,defaultValues:t,onSubmit:o})=>{let r=reactHookForm.useForm({defaultValues:t}),{handleSubmit:i,setValue:a,formState:{errors:l}}=r,p=m=>{o(re(m));};return fe__default.default.createElement(reactHookForm.FormProvider,{...r},e({handleSubmit:i(p),setValue:(m,d)=>a(m,d),errors:l}))},re=(e,t="",o=".")=>{let r={};return Object.keys(e).forEach(i=>{let a=t?`${t}${o}${i}`:i;if(ze__default.default(e[i])){let l=re(e[i],a,o);Object.keys(l).forEach(p=>{r[p]=l[p];});}else r[a]=e[i];}),r},H=et;var ne=(o=>(o.Auth="auth",o.Onboard="onboard",o))(ne||{});var tt=async e=>{let t=await fetch(`${g}/hosted/onboarding/config`,{method:"GET",headers:{"X-Onboarding-Config-Key":e}});if(!t.ok)throw new Error("Failed to fetch onboarding config");return await t.json()},ie=tt;var h=fe.createContext([{publicKey:"",step:"auth"},()=>{}]),st=({appearance:e,authToken:t,children:o,publicKey:r,locale:i="en-US"})=>{let[a,l]=fe.useState({appearance:e,authToken:t,step:t?"onboard":"auth",publicKey:r,locale:i}),p=fe.useMemo(()=>[a,l],[a]),m=async d=>{if(!d)throw new Error("No publicKey found");try{let s=await ie(d);l(n=>({...n,onboardingConfig:s}));}catch(s){throw new Error(`Failed to fetch onboarding config: ${s}`)}};return fe.useEffect(()=>{m(r);},[r]),fe__default.default.createElement(h.Provider,{value:p},o)},Y=st;var pt=e=>new Date(e).toString()!=="Invalid Date",dt=(e,t=new Date)=>t.getFullYear()-new Date(e).getFullYear()<18,lt=(e,t=new Date)=>t.getFullYear()-new Date(e).getFullYear()>120,ut=(e,t=new Date)=>new Date(e)>=t,mt=(e,t)=>{let o=t==="en-US"?1:0,r=t==="en-US"?0:1,i=2,a=e.split("/");if(a.length!==3||o===void 0||r===void 0||i===void 0)return {day:"",month:"",year:""};let l=a[o],p=a[r],m=a[i];return {day:l,month:p,year:m}},ct=({day:e,month:t,year:o})=>!(e.length!==2||t.length!==2||o.length!==4),ft=(e,t)=>{let{day:o,month:r,year:i}=mt(e,t);if(!ct({day:o,month:r,year:i}))return "Invalid date";let l=`${i}-${r}-${o}`;return pt(l)?ut(l)?"Cannot be in the future":dt(l)?"Must be at least 18 years old":lt(l)?"Cannot be before than 1900":!0:"Invalid date"},ae=ft;var yt=e=>{let t=e?.trim();return /^([^@#$%^*()_+=~/\\<>~`[\]{}!?;:]+)$/.test(t)},P=yt;var gt=/^(?!(000|666|9))(\d{3}-(?!(00))\d{2}-(?!(0000))\d{4})$/,se=e=>gt.test(e),bt=/^((?!(0000))\d{4})$/,pe=e=>bt.test(e);var ht=()=>{let[e]=fe.useContext(h),{locale:t}=e,{formState:{errors:o}}=reactHookForm.useFormContext(),r=fe.useContext(_);if(!r.name)throw new Error("Input must be used inside a Field component");let i=Tt(r.name,{locale:t});if(!i)throw new Error(`Field ${r.name} is not supported`);return {"aria-invalid":!!We__default.default(o,r.name),id:r.id,...i,name:r.name}},vt=e=>({phoneNumber:{autoComplete:"tel",keyboardType:"phone-pad",mask:Ot.createNumberMask({prefix:["+"],delimiter:"",separator:"",precision:0}),returnKeyType:"done",validations:{required:"Phone is required",validate:t=>validator.isMobilePhone(t)?!0:"Phone is invalid"}},email:{autoComplete:"email",autoCorrect:!1,autoCapitalize:"none",validations:{required:"Email is required",validate:t=>validator.isEmail(t)?!0:"Email is invalid"}},dob:{autoComplete:"birthdate-full",keyboardType:"number-pad",returnKeyType:"done",mask:e.locale==="en-US"?Ot.Masks.DATE_MMDDYYYY:Ot.Masks.DATE_DDMMYYYY,validations:{required:"Dob is required",validate:t=>ae(t,e.locale)}},ssn4:{autoComplete:"off",keyboardType:"number-pad",returnKeyType:"done",maxLength:4,validations:{required:"SSN is required",validate:t=>pe(t)?!0:"SSN is invalid"}},ssn9:{autoComplete:"off",keyboardType:"number-pad",returnKeyType:"done",mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],maxLength:11,validations:{required:"SSN is required",validate:t=>se(t)?!0:"SSN is invalid"}},firstName:{autoComplete:"given-name",validations:{required:"First name is required",validate:t=>P(t)?!0:"First name is invalid"}},middleName:{autoComplete:"additional-name",validations:{validate:t=>t===""||P(t)?!0:"Middle name is invalid"}},lastName:{autoComplete:"family-name",validations:{required:"Last name is required",validate:t=>P(t)?!0:"Last name is invalid"}}}),kt=()=>({country:{autoComplete:"country",validations:{required:"Country is required"}},city:{autoComplete:"postal-address-locality",validations:{required:"City is required"}},addressLine1:{autoComplete:"address-line1",validations:{required:"Address is required"}},addressLine2:{autoComplete:"address-line2",validations:{}},state:{autoComplete:"postal-address-region",validations:{required:"State is required"}},zip:{autoComplete:"postal-code",validations:{required:"Zip is required"}},custom:{}}),Dt=()=>({name:{validations:{required:"Business name cannot be empty or is invalid"}},dba:{},tin:{keyboardType:"number-pad",returnKeyType:"done",maxLength:10,mask:[/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/],validations:{required:"TIN cannot be empty or is invalid",pattern:{value:/^\d{2}-\d{7}$/,message:"TIN must be in the format XX-XXXXXXX"}}},website:{inputMode:"url",autoComplete:"url",autoCapitalize:"none",autoCorrect:!1,validations:{required:"Website cannot be empty"}},phoneNumber:{autoComplete:"tel",keyboardType:"phone-pad",returnKeyType:"done",mask:Ot.createNumberMask({prefix:["+"],delimiter:"",separator:"",precision:0}),validations:{required:"Phone is required",validate:e=>validator.isMobilePhone(e)?!0:"Phone is invalid"}},corporationType:{autoCapitalize:"none",validations:{required:"Corporation type is required"}}}),At=()=>({ownershipStake:{keyboardType:"number-pad",returnKeyType:"done",inputMode:"numeric",validations:{required:"Stake is required"},transformValue:e=>parseInt(e,10)}}),Tt=(e,t)=>{let o=vt(t),r=kt(),i=Dt(),a=At();if(e==="id.phone_number")return o.phoneNumber;if(e==="id.email")return o.email;if(e==="id.dob")return o.dob;if(e==="id.first_name")return o.firstName;if(e==="id.middle_name")return o.middleName;if(e==="id.last_name")return o.lastName;if(e==="id.ssn9")return o.ssn9;if(e==="id.ssn4")return o.ssn4;if(e==="id.country"||e==="business.country")return r.country;if(e==="id.address_line1"||e==="business.address_line1")return r.addressLine1;if(e==="id.address_line2"||e==="business.address_line2")return r.addressLine2;if(e==="id.city"||e==="business.city")return r.city;if(e==="id.state"||e==="business.state")return r.state;if(e==="id.zip"||e==="business.zip")return r.zip;if(e==="business.name")return i.name;if(e.startsWith("custom"))return r.custom;if(e==="business.dba")return i.dba;if(e==="business.tin")return i.tin;if(e==="business.website")return i.website;if(e==="business.phone_number")return i.phoneNumber;if(e==="business.corporation_type")return i.corporationType;if(e.startsWith("business.beneficial_owners")){if(e.endsWith("first_name"))return o.firstName;if(e.endsWith("middle_name"))return o.middleName;if(e.endsWith("last_name"))return o.lastName;if(e.endsWith("phone_number"))return o.phoneNumber;if(e.endsWith("email"))return o.email;if(e.endsWith("ownership_stake"))return a.ownershipStake}return null},ce=ht;var Rt=({...e})=>{let{control:t}=reactHookForm.useFormContext(),{name:o,validations:r={},transformValue:i,...a}=ce();return fe__default.default.createElement(reactHookForm.Controller,{control:t,rules:r,render:({field:{onChange:l,onBlur:p,value:m}})=>fe__default.default.createElement(Ot__default.default,{onBlur:p,onChangeText:d=>{if(i){l(i(d));return}l(d);},value:m,...a,...e}),name:o})},$=Rt;var wt={Provider:Y,Form:H,Input:$,Field:I,FieldErrors:W,COUNTRY_CODES:G,CORPORATION_TYPES:V},Nt=wt;var ye="X-Fp-Authorization";var L=(f=>(f.name="business.name",f.doingBusinessAs="business.dba",f.website="business.website",f.phoneNumber="business.phone_number",f.tin="business.tin",f.corporationType="business.corporation_type",f.beneficialOwners="business.beneficial_owners",f.kycedBeneficialOwners="business.kyced_beneficial_owners",f.addressLine1="business.address_line1",f.addressLine2="business.address_line2",f.city="business.city",f.state="business.state",f.country="business.country",f.zip="business.zip",f))(L||{}),D=(p=>(p.occupation="investor_profile.occupation",p.employedByBrokerageFirm="investor_profile.brokerage_firm_employer",p.annualIncome="investor_profile.annual_income",p.netWorth="investor_profile.net_worth",p.investmentGoals="investor_profile.investment_goals",p.riskTolerance="investor_profile.risk_tolerance",p.declarations="investor_profile.declarations",p))(D||{}),F=(c=>(c.firstName="id.first_name",c.middleName="id.middle_name",c.lastName="id.last_name",c.email="id.email",c.phoneNumber="id.phone_number",c.dob="id.dob",c.ssn9="id.ssn9",c.ssn4="id.ssn4",c.addressLine1="id.address_line1",c.addressLine2="id.address_line2",c.city="id.city",c.state="id.state",c.country="id.country",c.zip="id.zip",c.nationality="id.nationality",c.usLegalStatus="id.us_legal_status",c.visaKind="id.visa_kind",c.visaExpirationDate="id.visa_expiration_date",c.citizenships="id.citizenships",c))(F||{}),A=(d=>(d.finraComplianceLetter="document.finra_compliance_letter",d.latestPassport="document.passport.front.latest_upload",d.latestPassportSelfie="document.passport.selfie.latest_upload",d.latestDriversLicenseFront="document.drivers_license.front.latest_upload",d.latestDriversLicenseBack="document.drivers_license.back.latest_upload",d.latestDriversLicenseSelfie="document.drivers_license.selfie.latest_upload",d.latestIdCardFront="document.id_card.front.latest_upload",d.latestIdCardBack="document.id_card.back.latest_upload",d.latestIdCardSelfie="document.id_card.selfie.latest_upload",d))(A||{});[...Object.values(L),...Object.values(D),...Object.values(F),...Object.values(A)];({["name"]:["id.first_name","id.middle_name","id.last_name"],["dob"]:["id.dob"],["ssn4"]:["id.ssn4"],["ssn9"]:["id.ssn9"],["full_address"]:["id.address_line1","id.address_line2","id.city","id.state","id.zip","id.country"],["email"]:["id.email"],["phone_number"]:["id.phone_number"],["nationality"]:["id.nationality"],["us_legal_status"]:["id.us_legal_status","id.visa_kind","id.visa_expiration_date","id.citizenships","id.nationality"],["business_name"]:["business.name","business.dba"],["business_tin"]:["business.tin"],["business_address"]:["business.address_line1","business.address_line2","business.city","business.state","business.zip","business.country"],["business_phone_number"]:["business.phone_number"],["business_website"]:["business.website"],["business_corporation_type"]:["business.corporation_type"],["business_beneficial_owners"]:["business.beneficial_owners"],["business_kyced_beneficial_owners"]:["business.kyced_beneficial_owners"],["document"]:["document.passport.front.latest_upload","document.drivers_license.back.latest_upload","document.drivers_license.front.latest_upload","document.id_card.back.latest_upload","document.id_card.front.latest_upload"],["document_and_selfie"]:[...Object.values(A).map(e=>e)],["investor_profile"]:["document.finra_compliance_letter",...Object.values(D).map(e=>e)]});var Mt=e=>{let t=Object.entries(e).some(([r])=>r.startsWith("id.")),o=Object.entries(e).some(([r])=>r.startsWith("business."));return {hasId:t,hasBusiness:o}},Pt=async e=>{let{data:t}=e;if(!Object.entries(t).length)return {};let{hasId:o,hasBusiness:r}=Mt(t);if(o&&r)throw new Error("You can't submit id and business at the same time");let a=await fetch(`${g}${r?"/hosted/business/vault":"/hosted/user/vault"}`,{method:"PATCH",body:JSON.stringify(t),headers:{[ye]:e.authToken}});if(!a.ok)throw new Error("Failed to save data");return a.json()},ge=Pt;var T="onboarding-components (RN)",be=()=>{let e="footprint";return reactNative.Platform.OS==="android"?`${e}://callback/`:`${e}://`},Kt=()=>{let e=!1,t=(n,u)=>{s();let y=C(u);n.onError?.(`${T}: ${y}`);},o=n=>{s(),n.onCancel?.();},r=(n,u)=>{s(),n.onComplete?.(u);},i=(n,{authToken:u,vaultingToken:y})=>{s(),n.onAuthComplete?.({authToken:u,vaultingToken:y});},a=async n=>{if(e){b("Footprint is already open.");return}e=!0;let u=await N({publicKey:n.publicKey,authToken:n.authToken,bootstrapData:n.bootstrapData,options:n.options,l10n:n.l10n},{isComponentSdk:!0});if(!u){t(n,"Unable to get SDK args token.");return}try{let y=await d(n,u);y.type!=="success"?o(n):m(n,y.url);}catch(y){t(n,`${y}`);}},l=n=>(reactNativeInappbrowserReborn.InAppBrowser.warmup(),{render:()=>a(n)}),p=()=>{s();},m=(n,u)=>{let{step:y}=n;if(!u){b(`${T}: Missing result URL.`),o(n);return}let f=be(),x=u.replace(f,""),v=we__default.default.parse(x);if(v.canceled){o(n);return}if(y==="auth"){let U=v.auth_token,c=v.components_vault_token;if(!U||typeof U!="string"){C(`${T}: Missing auth token after auth step.`),t(n,"User authetication failed - missing auth token");return}if(!c||typeof c!="string"){C(`${T}: Missing vaulting token after auth step.`),t(n,"User authetication failed - missing auth token");return}i(n,{authToken:U,vaultingToken:c});return}let B=v.validation_token;if(!B||typeof B!="string"){b(`${T}: Missing validation token.`),o(n);return}r(n,B);},d=async(n,u)=>{let y=be(),f=S({appearance:n.appearance,l10n:n.l10n,redirectUrl:y,token:u});if(!await reactNativeInappbrowserReborn.InAppBrowser.isAvailable())throw new Error("InAppBrowser is not available.");return await reactNativeInappbrowserReborn.InAppBrowser.openAuth(f,y,{ephemeralWebSession:!0})},s=()=>{e=!1;try{reactNativeInappbrowserReborn.InAppBrowser.close();}catch{}};return {init:l,destroy:p}},Z=Kt();var xe=e=>typeof e=="string",_e=(e,t)=>{if(!t||!xe(t)||!e)return "";let o=new Date,r=t.trim().split("/"),i=new Intl.DateTimeFormat(e).formatToParts(o).map((m,d)=>d%2===0?m.type:m.value).join(""),a=r[0]?r[0].padStart(2,"0"):"",l=r[1]?r[1].padStart(2,"0"):"",p=r[2]?r[2]:"";return !a||!l||!p?"":i==="day/month/year"?`${l}/${a}/${p}`:`${a}/${l}/${p}`},Ce=e=>{if(!e||!xe(e)||Array.isArray(e))return;let[t,o,r]=e.trim().split("/");return !o||!t||!r?void 0:`${r}-${t.padStart(2,"0")}-${o.padStart(2,"0")}`};var Bt=e=>Object.fromEntries(Object.entries(e).filter(t=>!!t[1])),he=(e,t)=>{if(typeof e["id.dob"]=="string"){let o=_e(t,e["id.dob"]);e["id.dob"]=Ce(o);}return Bt(e)};var qt=()=>{let[e,t]=fe.useContext(h);return {launchIdentify:({email:a,phoneNumber:l},{onAuthenticated:p,onError:m,onCancel:d}={})=>{Z.init({appearance:e.appearance,publicKey:e.publicKey,bootstrapData:{"id.phone_number":l,"id.email":a},onAuthComplete:({authToken:n,vaultingToken:u})=>{t(y=>({...y,authToken:n,vaultingToken:u,step:"onboard"})),p?.();},onError:n=>{m?.(n);},onCancel:()=>{d?.();},step:"auth"}).render();},save:async(a,{onSuccess:l,onError:p}={})=>{let{vaultingToken:m,onboardingConfig:d}=e;if(!m){p?.(new Error("No authToken found. Please authenticate first"));return}if(!d){p?.(new Error("No onboardingConfig found. Please make sure that the publicKey is correct"));return}if(d.kind!=="kyc"&&d.kind!=="kyb"){p?.(new Error("Unsupported onboardingConfig kind"));return}try{await ge({data:he(a,e.locale??"en-US"),bootstrapDis:[],authToken:m}),l?.();}catch(s){p?.(s);}},handoff:({onComplete:a,onError:l,onCancel:p}={})=>{let{authToken:m,appearance:d}=e;if(!m){l?.(new Error("No authToken found. Please authenticate first"));return}Z.init({appearance:d,authToken:m,onComplete:n=>{a?.(n);},onError:n=>{l?.(n);},onCancel:()=>{p?.();},step:"onboard"}).render();}}},Vt=qt;

exports.Fp = Nt;
exports.OnboardingStep = ne;
exports.default = Pe;
exports.useFootprint = Vt;
